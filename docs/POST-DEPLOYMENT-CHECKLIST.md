# デプロイ後動作確認チェックリスト

## 🚀 デプロイ直後の確認（必須）

### 1. 基本アクセス確認
- [ ] **本番URL**でサイトにアクセスできる
- [ ] **HTTPS**が有効になっている（鍵アイコンが表示される）
- [ ] **www有り/無し**の両方でアクセスできる
- [ ] **トップページ**が正常に表示される
- [ ] **404ページ**が適切に表示される（存在しないURLでテスト）

### 2. 管理画面アクセス確認
- [ ] `/admin` にアクセスすると `/admin/login` にリダイレクトされる
- [ ] ログインページが正常に表示される
- [ ] ログインフォームが機能する
- [ ] 誤ったパスワードでエラーメッセージが表示される

## 🔐 セキュリティ確認

### 1. HTTPヘッダー確認
```bash
curl -I https://your-domain.com
```
以下のヘッダーが含まれていることを確認：
- [ ] `Strict-Transport-Security`
- [ ] `X-Content-Type-Options: nosniff`
- [ ] `X-Frame-Options: DENY`
- [ ] `Referrer-Policy`

### 2. 認証・認可確認
- [ ] 未ログイン状態で `/admin/news` にアクセスできない
- [ ] APIエンドポイント `/api/news` に直接アクセスできない
- [ ] ログアウト後、管理画面にアクセスできない
- [ ] ブラウザの戻るボタンでログイン後のページに戻れない

### 3. データ保護確認
- [ ] ソースコードに環境変数が露出していない
- [ ] エラーページにスタックトレースが表示されない
- [ ] robots.txt で管理画面がクロール対象外になっている

## 📱 機能動作確認

### 1. 管理画面ログイン
- [ ] 正しい認証情報でログインできる
- [ ] ログイン後、ダッシュボードが表示される
- [ ] セッションが維持される（ページ更新後もログイン状態）
- [ ] Remember Me機能が動作する（実装済みの場合）

### 2. ニュース管理機能
#### 一覧表示
- [ ] ニュース一覧が表示される
- [ ] ページネーションが動作する
- [ ] 検索機能が動作する
- [ ] カテゴリフィルターが動作する
- [ ] ソート機能が動作する

#### 作成機能
- [ ] 新規作成フォームが表示される
- [ ] 必須項目のバリデーションが動作する
- [ ] スラッグ自動生成が動作する
- [ ] カテゴリ選択が動作する
- [ ] サムネイルプレビューが表示される
- [ ] 作成成功後、一覧にリダイレクトされる
- [ ] 作成したニュースが一覧に表示される

#### 編集機能
- [ ] 編集フォームに既存データが表示される
- [ ] 更新が正常に保存される
- [ ] 更新成功のトースト通知が表示される

#### 削除機能
- [ ] 削除確認ダイアログが表示される
- [ ] 削除が正常に実行される
- [ ] 削除後、一覧から消える

#### 公開/非公開切り替え
- [ ] トグルスイッチが動作する
- [ ] 状態が即座に反映される
- [ ] ページ更新後も状態が維持される

### 3. レスポンシブデザイン
- [ ] **モバイル**（iPhone/Android）で正常に表示される
- [ ] **タブレット**（iPad）で正常に表示される
- [ ] **デスクトップ**で正常に表示される
- [ ] 管理画面のハンバーガーメニューが動作する

## 🎯 パフォーマンス確認

### 1. ページ読み込み速度
- [ ] トップページが3秒以内に表示される
- [ ] 管理画面が3秒以内に表示される
- [ ] 画像が最適化されて配信される

### 2. Lighthouse スコア（目標値）
[PageSpeed Insights](https://pagespeed.web.dev/)でテスト：
- [ ] Performance: 70以上
- [ ] Accessibility: 90以上
- [ ] Best Practices: 90以上
- [ ] SEO: 90以上

## 🔄 統合確認

### 1. データベース接続
- [ ] ニュースの作成・読取・更新・削除が正常に動作
- [ ] データが永続化される
- [ ] 同時アクセスでエラーが発生しない

### 2. 画像アップロード
- [ ] 外部URLの画像が表示される
- [ ] HTTPSの画像URLが正常に処理される
- [ ] 画像の読み込みエラーが適切にハンドリングされる

## 📊 エラー処理確認

### 1. エラーページ
- [ ] 404エラーページが表示される
- [ ] 500エラーページが表示される（該当する場合）
- [ ] エラーページから他のページへ遷移できる

### 2. フォームエラー
- [ ] バリデーションエラーが適切に表示される
- [ ] ネットワークエラー時に適切なメッセージが表示される
- [ ] タイムアウト時の処理が適切

## 🌐 ブラウザ互換性確認

### デスクトップブラウザ
- [ ] Chrome（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（最新版）
- [ ] Edge（最新版）

### モバイルブラウザ
- [ ] iOS Safari
- [ ] Chrome for Android

## 📝 最終確認事項

### 1. 本番環境設定
- [ ] デフォルトパスワードが変更されている
- [ ] 管理者メールアドレスが正しい
- [ ] 本番用の強力なJWT_SECRETが設定されている
- [ ] デバッグモードが無効になっている

### 2. バックアップ
- [ ] データベースのバックアップ方法が確立されている
- [ ] 定期バックアップがスケジュールされている
- [ ] リストア手順が文書化されている

### 3. 監視
- [ ] エラーログの監視方法が確立されている
- [ ] パフォーマンスメトリクスが設定されている
- [ ] アラート通知が設定されている

## 🚨 問題発生時の対応

問題が見つかった場合：
1. 問題の詳細を記録
2. 再現手順を確認
3. 影響範囲を評価
4. 必要に応じてロールバックを実施
5. 修正後、再度このチェックリストを実行

## ✅ 承認

すべての項目が確認できたら、以下を記録：

- **確認実施者**: _______________
- **確認日時**: _______________
- **本番稼働承認者**: _______________
- **承認日時**: _______________

---

**注意**: このチェックリストは最低限の確認項目です。プロジェクトの要件に応じて項目を追加してください。